webpackJsonp([0],{"3fs2":function(t,e,o){var n=o("RY/4"),a=o("dSzd")("iterator"),r=o("/bQp");t.exports=o("FeBl").getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||r[n(t)]}},BO1k:function(t,e,o){t.exports={default:o("fxRn"),__esModule:!0}},DHIY:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("BO1k"),a=o.n(n),r={name:"RenewDialog",components:{},props:{QualityDialogFlag:{default:!1}},data:function(){return{visible:!1,formData:{renewalDuration:"",amountPayable:"4.9 ¥",nowAmountPayable:"4.9 ¥"},rules:{renewalDuration:[{required:!0,message:"请择选拉下选择选择续费时长",trigger:"change"}]},renewalDurationOptions:[{label:"两个月",value:"two",discountBefore:"4.92 ¥",discountAfter:"4.92 ¥"},{label:"半年",value:"six",discountBefore:"14.7 ¥",discountAfter:"13.23 ¥"},{label:"一年",value:"twelve",discountBefore:"29.4 ¥",discountAfter:"25.87 ¥"}]}},created:function(){},mounted:function(){},methods:{selectChange:function(t){var e=!0,o=!1,n=void 0;try{for(var r,i=a()(this.renewalDurationOptions);!(e=(r=i.next()).done);e=!0){var l=r.value;l.value===t&&(this.formData.amountPayable=l.discountBefore,this.formData.nowAmountPayable=l.discountAfter)}}catch(t){o=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(o)throw n}}},RenewalPopUpWindow:function(){this.$emit("update:QualityDialogFlag",!1)},ok:function(){this.renewal(this.formData.renewalDuration),this.$emit("update:QualityDialogFlag",!1)},submitForm:function(){this.$refs.elForm.validate(function(t){})},resetForm:function(){this.$refs.elForm.resetFields()},renewal:function(t){console.log(t),this.getToken();var e=null;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MicroSoft.XMLHTTP")).open("GET","https://codevar-api.motouguai.com/utools/info?accessToken="+window.access_token+"&renew=1&renewGear="+t,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){var t={};try{110===(t=JSON.parse(e.responseText)).code?utools.showNotification(t.msg):111===t.code&&(utools.showNotification(t.msg),utools.openPayment({goodsId:t.data.goodsId},function(){utools.showNotification("续费成功,请稍等片刻继续使用!")}))}catch(t){alert(t)}}};try{e.send()}catch(t){alert("请求失败哈")}},getToken:function(t){console.log("getToken"+t);var e=utools.db.get("token"),o=utools.db.get("token_time");if(null!=e&&null!=o){if(Date.now()-o.data<61e5&&!0!==t)return void(window.access_token=e.data);utools.fetchUserServerTemporaryToken().then(function(t){window.access_token=t.token,utools.db.put({_id:"token",data:t.token,_rev:e._rev}),utools.db.put({_id:"token_time",data:Date.now(),_rev:o._rev})})}else utools.fetchUserServerTemporaryToken().then(function(t){window.access_token=t.token,utools.db.put({_id:"token",data:t.token}),utools.db.put({_id:"token_time",data:Date.now()})})}},watch:{QualityDialogFlag:function(){this.visible=this.QualityDialogFlag}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"续费",visible:t.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e},close:t.RenewalPopUpWindow}},[o("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"120px"}},[o("el-form-item",{attrs:{label:"续费时长"}},[o("el-select",{style:{width:"100%"},attrs:{placeholder:"点击选择选择续费时长",clearable:""},on:{change:t.selectChange},model:{value:t.formData.renewalDuration,callback:function(e){t.$set(t.formData,"renewalDuration",e)},expression:"formData.renewalDuration"}},t._l(t.renewalDurationOptions,function(t,e){return o("el-option",{key:e,attrs:{label:t.label,value:t.value,disabled:t.disabled}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"金额"}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("div",{staticClass:"grid-contents line-through"},[t._v("原价:"+t._s(t.formData.amountPayable)+"\n        ")])]),t._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"grid-content",staticStyle:{color:"#ec32e2"}},[t._v("现价:"+t._s(t.formData.nowAmountPayable))])])],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.RenewalPopUpWindow}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("选好了, 我要续费")])],1)],1)},staticRenderFns:[]};var l=o("VU/8")(r,i,!1,function(t){o("cbNQ")},null,null);e.default=l.exports},"RY/4":function(t,e,o){var n=o("R9M2"),a=o("dSzd")("toStringTag"),r="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,o,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(o=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?o:r?n(e):"Object"==(i=n(e))&&"function"==typeof e.callee?"Arguments":i}},cbNQ:function(t,e){},fxRn:function(t,e,o){o("+tPU"),o("zQR9"),t.exports=o("g8Ux")},g8Ux:function(t,e,o){var n=o("77Pl"),a=o("3fs2");t.exports=o("FeBl").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}}});